mkdir -p initrd/{bin,dev,etc,lib,lib64,mnt/root,proc,root,sbin,sys}
sudo cp -a /dev/{null,console,tty*,} initrd/dev/
sudo tar -zxvf busybox_install.tgz -C initrd/
sudo emacs initrd/init
#!/bin/busybox sh

# Mount the /proc and /sys filesystems.
mount -t proc none /proc
mount -t sysfs none /sys

# Do your stuff here.
echo "This script just mounts and boots the rootfs, nothing else!"

# Mount the root filesystem.
mount -o ro /dev/sda1 /mnt/root

# Clean up.
umount /proc
umount /sys

# Boot the real thing.
exec switch_root /mnt/root /sbin/init

sudo chmod +x initrd/init 
cd initrd/
sudo /bin/bash -c "find . -print0 | cpio --null -ov --format=newc | gzip -9 > ../custom-initramfs.cpio.gz"
